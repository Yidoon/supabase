import Layout from '~/layouts/DefaultGuideLayout'

export const meta = {
  id: 'storage-bucket-public-and-private',
  title: 'Storage Buckets',
  description: 'Learn how Supabase Storage Buckets works.',
  sidebar_label: 'Buckets',
}

Buckets allows you to keep your files organised, determining the **Security Access Model** for your assets and apply restrictions to the type of files that can be uploaded.

## Security Access Model

There are 2 Security models for buckets, **public** and **private** buckets.

### Private Buckets
When a bucket is set to **Private** all operations are subject to Access Control via [RLS policies](/guides/storage/uploads/access-control).
This also applies for serving & downloading the assets.

The only ways to download an assets within a private bucket is to:

- Use the `download` method by providing a authorization header containing your user's JWT. The RLS policy you have created on the `storage.objects` table will use this user to determine whether or not they have access.
- Create a signed temporary URL with the `createSignedUrl` method that can be accessed for a limited time.

#### Performance:

Performance on private buckets might be impacted when serving / downloading an asset, since the CDN cache must be partitioned on a user level.
This means that the cache is not shared across users resulting more often with a cache MISS.
Consider using public buckets if your assets are frequently accessed.


#### Example Use Cases:

- Uploading users' confidential documents
- Uploading private assets
- Needing the power of RLS to set fine-grain access control on the asset


### Public Buckets
When a bucket is set to be **Public** the access control for **retrieving** and **serving** the files within this bucket are bypassed.
Anyone will be able to view these assets if they access the asset URL.

Access control is still honored for other types of operations, such as: Upload, Delete, Move, Copy

#### Performance:
Since public buckets allow serving and downloading files without checking for permissions, the CDN cache is shared across all users globally.
This resulting in a very high cache HIT ratio and much lower latency.

#### Example Use Cases:

- User profile pictures
- User public media
- Blog post contents

export const Page = ({ children }) => <Layout meta={meta} children={children} />

export default Page